@import 'project-mixins'
@import 'animations'

*
  box-sizing: border-box

body
  @extend %textured-background
  @extend %unpad
  font-family: $sans-serif
  color: $darkgrey
  +standardTransition(background)

a
  text-decoration: none
  color: inherit

.italic
  font-style: italic

.modal__overlay
  position: fixed
  top: 0
  left: 0
  right: 0
  bottom: 0
  display: flex
  justify-content: center
  align-items: center
  z-index: 999

.modal__container
  position: relative
  background-color: $white
  width: 100%
  height: 100%
  box-sizing: border-box
  overflow-y: auto

.modal__close--desktop
  visibility: hidden

.modal__message
  +displayflex()
  +flex-direction(column)
  +align-items(center)
  +justify-content(center)
  margin-top: 20vh
  font-size: 20px

#globalModal[aria-hidden="false"] .modal__container
  animation: mmslideIn .2s linear

.header
  position: absolute

.header,
.modal__header
  +displayflex()
  +justify-content(center)
  +align-items(center)
  height: $header-height-small
  width: 100%
  background-color: $main
  +standardTransition(height)

.header--fixed
  position: fixed
  top: 0
  left: 0
  z-index: 999

.header__title,
.modal__title
  max-width: 70%
  white-space: nowrap
  overflow: hidden
  text-overflow: ellipsis
  font-family: $sans-serif
  font-size: 24px
  color: $white
  font-weight: $regular
  text-align: center

.header__title--widescreen
  display: none

.header__title--editable
  width: 55%
  font-size: 20px
  font-weight: $light
  color: $main

.header__nav,
.modal__close
  position: absolute
  +standardTransition()

.header__nav--left,
.modal__close
  left: 9px

.header__nav--right
  right: 9px
  +displayflex()
  +flex-direction(row)

.header__icon:hover,
.modal__close:hover
  cursor: pointer

.header__icon--back,
.modal__close
  box-sizing: content-box
  height: 20px
  padding: 9px 18px 9px 0

.header__icon--home
  height: 23px
  width: 36px
  +rotate('-8')

.header__icon--settings,
.header__icon--train,
.header__icon--info
  height: 23px
  width: auto

.header__icon--train
  margin-right: 12px

.header__icon--edit
  height: 23px
  width: 29px

.logo--min
  display: none

.logo__title
  @extend %unpad
  display: inline-block
  font-family: $display
  font-weight: $extrabold
  font-size: 36px
  color: $white
  +standardTransition(font-size)

.logo__icon
  margin-right: 5px
  margin-bottom: -1px
  height: 28px
  width: auto
  +rotate('-8')
  +standardTransition()

.main
  +displayflex()
  +flex-direction(column)
  +justify-content(flex-start)
  +align-items(center)
  +flex-wrap(wrap)
  box-sizing: content-box
  min-height: calc(100% - 46px)
  padding-top: $header-height-small

.buttonrow
  display: grid
  -ms-grid-columns: [col1-start] 1fr [col2-start] 1fr [col2-end]
  grid-template-columns: [col1-start] 1fr [col2-start] 1fr [col2-end]
  -ms-grid-rows: [row1-start] $primary-button-height [row1-end]
  grid-template-rows: [row1-start] $primary-button-height [row1-end]
  width: 100%
  +align-self(flex-end)
  margin-top: auto

.buttonrow--short
  -ms-grid-rows: [row1-start] 61px [row1-end]
  grid-template-rows: [row1-start] 61px [row1-end]

.buttonrow--fixed
  position: fixed
  bottom: -3px
  z-index: 99

.buttonrow--gap
  column-gap: 3px
  margin-top: $secondary-button-height

.buttonrow--double
  -ms-grid-columns: [col1-start] 1fr [col1-end]
  grid-template-columns: [col1-start] 1fr [col1-end]
  -ms-grid-rows: [row1-start] $secondary-button-height [row2-start] $primary-button-height [row2-end]
  grid-template-rows: [row1-start] $secondary-button-height [row2-start] $primary-button-height [row2-end]
  margin-top: auto

.button
  @extend %unpad
  +displayflex()
  +align-items(center)
  +justify-content(center)
  font-family: $sans-serif
  font-weight: $semibold
  font-size: 24px
  color: $white
  border: none
  cursor: pointer

.button--nav
  display: none

.button--primary
  order: 2
  height: 100%
  background-color: $accent

.button--secondary
  height: 100%
  background-color: $main
  font-weight: $regular

.button--incorrect
  background-color: $lightgrey

.button--fullwidth
  grid-column-start: col1-start
  grid-column-end: col2-end

.button--disabled
  background-color: $white
  color: $main
  cursor: default

.button__flyout
  display: none

.upload__input
  display: none

.banner
  position: relative
  width: 100%
  min-height: 36px
  margin-top: 15px
  padding: 10px 51px 10px 10px
  background-color: $white
  overflow: hidden
  z-index: auto
  +standardTransition()

.banner--success,
.banner--error
  position: fixed
  z-index: 99

.banner--success
  border: 1px solid $darkgrey

.banner--error
  border: 1px solid #C63D0F

.banner--collapsing
  min-height: 0
  height: 0
  padding: 0

.banner__text
  @extend %unpad
  font-size: 14px
  color: $darkgrey

.banner__close
  position: absolute
  top: 0
  right: 0
  box-sizing: content-box
  width: 28px
  padding: 4px
  cursor: pointer

.deckmenu
  display: grid
  justify-content: space-between
  -ms-grid-columns: 1fr 1fr
  grid-template-columns: 1fr 1fr
  grid-row-gap: 9px
  width: 98%
  margin: 31px auto 80px
  +standardTransition()

.deckmenu--withbanner
  margin-top: 100px
  +standardTransition()

.deck__container
  position: relative
  margin: 0 auto
  height: 238px + 5px
  
.deck
  width: 178px
  height: 238px
  border: 1px solid $darkgrey
  border-radius: 24px
  background-color: $white
  font-size: 12px
  +standardTransition()

.deck__container:hover .deck--behind1
  +translate(0, 2px)

.deck__container:hover .deck--behind2,
  +translate(0, 4px)

.deck--behind1
  position: absolute
  z-index: -1
  top: 2px

.deck--behind2
  position: absolute
  z-index: -2
  top: 4px

.deck__link
  position: absolute
  top: 11px
  right: 7px
  display: inline-block
  z-index: 10

.deck__editicon
  width: 27px
  height: 21px
  fill: $darkgrey

.deck__editicon:hover
  fill: $accent
  cursor: pointer

.deck__length
  margin: 1em auto
  text-align: center

.deck__band
  +displayflex()
  +justify-content(center)
  +align-items(center)
  height: 74px
  border-top: 1px solid $darkgrey
  border-bottom: 1px solid $darkgrey
  background-color: $white
  +standardTransition()

.deck__title
  color: $darkgrey
  font-weight: $semibold
  font-size: 16px
  text-transform: uppercase
  text-align: center

.avgchart
  +displayflex()
  +flex-direction(row)
  +justify-content(space-between)
  +align-items(flex-end)
  width: 99px
  margin: 40px auto auto

.avgchart__bar
  width: 14px
  height: 21px

@for $i from 1 through 5
  .avgchart__bar:nth-child(#{$i})
    background-color: nth($diffcolors, $i)
    color: nth($difffonts, $i)

.avgchart__bar:nth-child(5)
  color: #fff

.avgchart__bar--tall
  +displayflex()
  +justify-content(center)
  +align-items(center)
  width: 35px
  height: 41px

.avgchart__num
  @extend %unpad
  font-weight: $extrabold
  font-size: 24px

.avgchart__label
  display: none

.edit
  display: grid
  grid-column-gap: 5px
  grid-template-columns: [col1-start] 1fr [col2-start] 50px [col2-end]
  grid-template-rows: [row1-start] 36px [row2-start] 36px [row3-start] 1fr [row3-end]
  width: 97%
  margin: 0 auto 10px
  padding: 5px
  background-color: $white

.edit--new
  border: 1px dashed $lightgrey 
  background-color: transparent
  margin: 16px auto 20px

.edit__add
  grid-column-start: col2-start
  grid-row-start: row1-start
  grid-row-end: row3-start
  margin: auto
  cursor: pointer

.edit__flexcontainer
  grid-column-start: col1-start
  grid-column-end: col2-start
  grid-row-start: row1-start
  grid-row-end: row2-end
  +displayflex()
  +flex-direction(column)

.edit__input
  width: 100%
  height: 36px
  padding: 6px
  border: 1px solid $darkgrey
  font-family: $sans-serif
  font-weight: $regular
  font-size: 18px
  color: $darkgrey
  white-space: nowrap
  overflow: hidden
  resize: none
  +standardTransition(height)

.edit__input:first-child
  margin-bottom: 5px

.edit__input:focus
  white-space: normal
  +standardTransition(height)

.edit__input::placeholder
  color: $lightgrey
  font-style: italic

.edit__input--dark
  border: none
  background-color: $main
  color: $white

.edit__input--dark::placeholder
  color: $white
  opacity: 0.8

.edit__selector
  -webkit-appearance: none
  -moz-appearance: none
  grid-column-start: col2-start
  grid-column-end: col2-end
  grid-row-start: row1-start
  grid-row-end: row2-start
  width: 100%
  height: 36px
  padding-left: 38%
  border: none
  border-radius: 0
  font-family: $sans-serif
  font-weight: $extrabold
  font-size: 22px

@for $i from 1 through 5
  .edit__selector--diff#{$i}
    background-color: nth($diffcolors, $i)
    color: nth($difffonts, $i)

.edit__delete
  grid-column-start: col2-start
  grid-row-start: row2-start
  height: 30px
  width: 28px
  margin: auto auto -2px

.edit__selector:hover,
.edit__delete:hover
  cursor: pointer

.progress
  +displayflex()
  +flex-direction(row)
  +justify-content(flex-start)
  +align-items(stretch)
  height: 12px
  width: 100%

.progress__block
  +flex(1, 1, auto)

.progress__block--correct
  background-color: $accent

.progress__block--incorrect
  background-color: $lightgrey

.progress__icon
  display: none

.card
  position: relative
  height: 300px
  width: 97%
  +flex(1, 0, auto)
  margin: 11px auto 7px
  perspective: 1000px
  +standardTransition()
  cursor: pointer

.card--autocheck
  max-height: 524px
  margin-bottom: 13px

.card__flipbox
  width: 100%
  height: 100%
  transform-style: preserve-3d
  +standardTransition(all, 0.4)

.card__flipbox--flip
  transform: rotateY(-180deg)

.card__side
  position: absolute
  top: 0
  left: 0
  backface-visibility: hidden
  background-color: $white
  border-radius: 24px
  overflow: hidden
  width: 100%
  height: 100%
  transform: rotateY(0deg)
  z-index: 2

.card__side + .card__side
  transform: rotateY(180deg)

.card__textcontainer
  +displayflex()
  +align-items(center)
  height: 100%
  width: 100%
  padding: 12px 0
  overflow-y: auto
  overflow-x: hidden

.card__text
  max-width: 94%
  margin: 0 auto
  font-family: $sans-serif
  font-weight: $regular
  font-size: 20px
  text-align: center
  white-space: pre-line

.card__text--long
  font-size: 16px
  +align-self(flex-start)

.card__text--leftalign
  text-align: left

.card__text p
  @extend %unpad

.card__difficulty
  position: absolute
  top: $card-difficulty-size / -2
  right: $card-difficulty-size / -2
  height: $card-difficulty-size
  width: $card-difficulty-size
  +rotate(45)

.card__difficulty--reverse
  right: auto
  left: $card-difficulty-size / -2

@for $i from 1 through 5
  .card__difficulty--diff#{$i}
    background-color: nth($diffcolors, $i)

.card__diffnumber
  @extend %unpad
  position: absolute
  top: $card-difficulty-size * 0.02
  right: $card-difficulty-size * 0.12
  font-family: $sans-serif
  font-weight: $extrabold
  font-size: 22px

@for $i from 1 through 5
  .card__diffnumber--diff#{$i}
    color: nth($difffonts, $i)

.useranswer
  display: block
  width: 90%
  height: 43px
  margin: 0 auto 13px
  font-family: $sans-serif
  font-size: 20px
  font-weight: $light
  text-align: center
  border: 0

.useranswer--correct
  border: 3px solid $accent

.useranswer--incorrect
  border: 3px solid $lightgrey

.useranswer__container
  position: relative
  width: 100%

.useranswer__icon
  position: absolute
  top: -10px
  right: 2%
  width: 61px
  height: 61px
  background-repeat: no-repeat
  background-position: center

.useranswer__icon--correct
  background-image: url("../assets/correct-circle.svg")

.useranswer__icon--incorrect
  background-image: url("../assets/incorrect-circle.svg")

.results
  +flex(1, 1, 0)
  +displayflex()
  +flex-direction(column)
  width: 100%
  background-color: $white

.results__chart
  height: 250px
  max-height: 250px
  width: 100%
  margin-bottom: 15px

.results__message
  margin: auto auto 10px
  font-size: 24px
  text-align: center

#globalModal
  display: none

#globalModal.is-open
  display: block

.settings
  @extend %textured-background
  +displayflex()
  +flex-direction(column)
  +align-items(center)
  min-height: 100%
  padding-top: 50px

.settings__group
  +displayflex()
  +flex-direction(column)
  width: 97%
  margin-bottom: 24px
  +flex(0, 0, auto)

.settings__title
  margin: 0 0 4px
  font-size: 18px
  font-family: $extrabold
  color: $white
  +standardTransition()

.settings__option
  +displayflex()
  +justify-content(space-between)
  +align-items(center)
  width: 100%
  min-height: 55px
  margin-top: 6px
  padding: 0 6px
  background-color: $white
  +standardTransition()

.settings__label
  @extend %unpad
  font-size: 18px

.settings__button
  +flex(1, 1, 100px)
  +displayflex()
  +align-items(center)
  +justify-content(center)
  height: 39px
  margin-right: 6px
  background-color: $main
  font-weight: $regular
  font-size: 18px
  color: $white
  cursor: pointer

.settings__button--primary
  background-color: $accent
  margin: 0 0 0 6px

.settings__select,
.settings__textinput
  width: 140px
  height: 43px
  padding-left: 9px
  border: 1px solid $darkgrey
  border-radius: 0
  font-family: $sans-serif
  font-weight: $extrabold
  font-size: 22px
  background-color: $white
  color: $darkgrey

.settings__textinput
  text-align: center

.settings__checkslide
  display: inline-block
  position: relative
  flex-shrink: 0
  width: 69px
  height: 38px
  margin-left: 5px

.settings__checkbox
  display: none

.settings__slider
  position: absolute
  cursor: pointer
  top: 0
  left: 0
  right: 0
  bottom: 0
  border-radius: 20px
  background-color: $lightgrey
  +standardTransition()

.settings__checkbox:checked + .settings__slider
  background-color: $accent

.settings__slider:before
  position: absolute
  content: ""
  height: 32px
  width: 32px
  left: 3px
  bottom: 3px
  border-radius: 50%
  background-color: $white
  -webkit-transition: .4s
  transition: .4s

.settings__checkbox:checked + .settings__slider:before
  background-color: $white
  -webkit-transform: translateX(31px)
  -ms-transform: translateX(31px)
  transform: translateX(31px)

.settings__radio > input
  visibility: hidden
  position: absolute

.settings__radio > div
  +displayflex-inline()
  +align-items(center)
  +justify-content(center)
  height: 48px
  width: 48px
  border-radius: 24px
  cursor: pointer

.settings__radio > div > svg
  width: 32px
  height: auto

.settings__radio > input:checked + div
  background-color: $accent

.settings__radio > input:checked + div > svg > g > g
  fill: $white

.diffselector
  display: grid
  grid-template-columns: repeat(5, 1fr)
  grid-template-rows: 1fr
  width: 345px
  height: 103px
  margin-top: 16px
  cursor: pointer

.diffselector__num
  grid-row-start: 1
  grid-row-end: 2
  +displayflex()
  +align-items(center)
  +justify-content(center)
  font-weight: 800
  font-size: 24px
  font-family: sans-serif

@for $i from 1 through 5
  .diffselector__num:nth-child(#{$i})
    grid-column-start: $i
    grid-column-end: $i + 1
    background-color: nth($diffcolors, $i)
    color: nth($difffonts, $i)

.diffselector__frame
  position: relative
  overflow: hidden
  grid-column-start: 1
  grid-column-end: 6
  grid-row-start: 1
  grid-row-end: 2
  border: 9px solid $main
  
.diffselector__pointer
  position: absolute
  bottom: -11px
  width: 22px
  height: 22px
  background-color: $main
  transform: rotate(45deg)
  
.diffselector__pointer:nth-child(1)
  left: 14px
  
.diffselector__pointer:nth-child(2)
  right: 14px
  
.diffselector__overlay
  grid-row-start: 1
  grid-row-end: 2
  z-index: 2
  
@for $i from 7 through 11
  .diffselector__overlay:nth-child(#{$i})
    grid-column-start: $i - 6
    grid-column-end: $i - 5

@media (pointer: coarse)
  .card--withinput
    height: 200px
    +flex(1, 1, auto)
    margin: 5px auto 5px

  .main--withinput
    margin-top: -46px

  .buttonrow--withinput
    -ms-grid-rows: [row1-start] 50px [row1-end]
    grid-template-rows: [row1-start] 50px [row1-end]

  .useranswer--withinput
    margin-bottom: 5px

@import 'tablet'
@import 'desktop'